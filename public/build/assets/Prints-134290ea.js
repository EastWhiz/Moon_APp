import{r as l,R as q,C as ve,j as e,a as Pe}from"./app-7567d059.js";import{A as Te}from"./ClientLayout-f9e90d30.js";import{S as B}from"./sweetalert2.all-28b1d869.js";import{d as _e,U as Ae,u as Ne,a as Re,I as a,B as S,b as k,S as Fe,c as qe,P as Be}from"./Select-8a69c4e0.js";import{B as d,T as g}from"./Box-f7bf9046.js";import{M as G,B as K,F as X}from"./Modal-da372002.js";import{T as Ie,a as Oe,b as Ee,c as Y,d as u,e as Le}from"./TableRow-63be1954.js";import"./ResponsiveNavLink-ec6d90ef.js";import"./transition-f6aa1792.js";import"./TransitionGroup-7ae9cdb0.js";import"./CSSTransition-f1c78c98.js";import"./useSlot-6a40faf7.js";import"./useTheme-b68cdaeb.js";const De=l.createContext(!1);var I={Link:"Polaris-Link",monochrome:"Polaris-Link--monochrome",removeUnderline:"Polaris-Link--removeUnderline"};function Ve({url:w,children:p,onClick:x,external:v,target:P,id:f,monochrome:O,removeUnderline:r,accessibilityLabel:T,dataPrimaryLink:m}){return q.createElement(De.Consumer,null,E=>{const j=O||E,b=_e(I.Link,j&&I.monochrome,r&&I.removeUnderline);return w?q.createElement(Ae,{onClick:x,className:b,url:w,external:v,target:P,id:f,"aria-label":T,"data-primary-link":m},p):q.createElement("button",{type:"button",onClick:x,className:b,id:f,"aria-label":T,"data-primary-link":m},p)})}function et({auth:w}){const p=ve().props,{query:x}=p.ziggy;console.log(p);function v(t){return Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}const P=v(x),[f,O]=l.useState(""),[r,T]=l.useState(!1),[m,E]=l.useState(!1),[j,b]=l.useState(!1),L=()=>b(!1),[D,Z]=l.useState(!1),V=()=>Z(!1),ee={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"70%",md:"60%",lg:"50%",xl:"50%"},bgcolor:"background.paper",boxShadow:24,p:3,pt:2,height:"420px",overflow:"auto"},te={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"70%",md:"35%",lg:"32%",xl:"32%"},bgcolor:"background.paper",boxShadow:24,p:3,pt:3,overflow:"auto"};let U=null;const se={singular:"print",plural:"prints"},[c,le]=l.useState([]),ae=[{label:"5",value:"5"},{label:"10",value:"10"},{label:"20",value:"20"},{label:"50",value:"50"},{label:"100",value:"100"}],[_,re]=l.useState("10"),ne=l.useCallback(t=>{re(t),o(!n)},[c]),[y,ie]=l.useState(0),oe=["All"].map((t,s)=>({content:t,index:s,onAction:()=>{},id:`${t}-${s}`,isLocked:s===0,actions:[]})),ce=[{label:"Id",value:"id asc",directionLabel:"Ascending"},{label:"Id",value:"id desc",directionLabel:"Descending"}],[C,de]=l.useState(["id desc"]),{mode:he,setMode:ue}=Ne(),pe=()=>{},[A,M]=l.useState(""),[Q,xe]=l.useState([]),[$,me]=l.useState(""),[i,N]=l.useState({path:route("prints.get.client"),next_cursor:null,next_page_url:null,prev_cursor:null,prev_page_url:null}),[W,h]=l.useState(null),[ge,R]=l.useState(!1),[n,o]=l.useState(!1),{selectedResources:z,allResourcesSelected:fe,handleSelectionChange:je}=Re(c);l.useEffect(()=>{let t=new URL(i.path);_&&t.searchParams.set("page_count",_),W&&t.searchParams.set("cursor",W),y==0?t.searchParams.delete("status"):y==1?t.searchParams.set("status","approved"):y==2&&t.searchParams.set("status","unapproved"),A!=""?t.searchParams.set("q",A):t.searchParams.delete("q"),C!=""?t.searchParams.set("q5",C[0]):t.searchParams.delete("q5"),Q.length!=0?t.searchParams.set("q2",JSON.stringify(Q)):t.searchParams.delete("q2"),$.length!=0?t.searchParams.set("q3",JSON.stringify($)):t.searchParams.delete("q3"),t=t.toString()+"&"+P,R(!0),fetch(t).then(s=>s.json()).then(s=>{s.success==!0&&(le(s.data.data),N({path:s.data.path,next_cursor:s.data.next_cursor,next_page_url:s.data.next_page_url,prev_cursor:s.data.prev_cursor,prev_page_url:s.data.prev_page_url})),R(!1)}).catch(s=>{R(!1)})},[n]),l.useEffect(()=>{o(!n)},[C]);const be=l.useCallback(t=>{M(t),clearTimeout(U),U=setTimeout(()=>{h(null),o(!n)},500)},[c]),F=l.useCallback(()=>{M(""),h(null),o(!n)},[c]),H=l.useCallback(()=>{xe([]),h(null),o(!n)},[c]),J=l.useCallback(()=>{me([]),h(null),o(!n)},[c]),ye=l.useCallback(()=>{F(),H(),J()},[F,H,J]),Ce=t=>{fetch(route("retry.print",x),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_print_id:t.id})}).then(s=>{if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);return s.json()}).then(s=>{s.success?(B.fire("Success",s.message,"success"),o(!n)):B.fire("Error",s.message,"error")}).catch(s=>{B.fire("Error",s.toString(),"error")})},Se=[],ke=[],we=c.map((t,s)=>e.jsxs(a.Row,{id:t.id,selected:z.includes(t.id),position:s,children:[e.jsx(a.Cell,{children:e.jsx("div",{className:"custom_style",children:e.jsx(Ve,{dataPrimaryLink:!0,children:e.jsx("b",{children:t.order.order_name})})})}),e.jsx(a.Cell,{children:t.selectedDate}),e.jsx(a.Cell,{children:t.design}),e.jsx(a.Cell,{children:e.jsx(S,{status:t.cityVisible=="true"?"success":"critical",children:t.cityVisible})}),e.jsx(a.Cell,{children:e.jsx(S,{status:t.dateVisible=="true"?"success":"critical",children:t.dateVisible})}),e.jsx(a.Cell,{children:e.jsx(S,{status:t.starsEffect=="true"?"success":"critical",children:t.starsEffect})}),e.jsx(a.Cell,{children:t.title??"N/A"}),e.jsx(a.Cell,{children:t.titleFont??"N/A"}),e.jsx(a.Cell,{children:t.paragraphText??"N/A"}),e.jsx(a.Cell,{children:t.paragraphTextFont??"N/A"}),e.jsx(a.Cell,{children:e.jsx(S,{status:t.status=="processed"?"success":"critical",children:t.status})}),e.jsxs(a.Cell,{children:[e.jsx(k,{disabled:!t.link,size:"slim",onClick:()=>window.open(t.link,"_blank"),children:"Open"}),e.jsx(d,{component:"span",ml:1}),e.jsx(k,{loading:t.status=="unprocessed",size:"slim",onClick:()=>Ce(t),children:"Re-Work"})]})]},t.id));return e.jsxs(Te,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:" Dashboard "}),children:[e.jsx(Pe,{title:"Prints"}),e.jsx("div",{children:e.jsx(G,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:j,onClose:L,closeAfterTransition:!0,slots:{backdrop:K},slotProps:{backdrop:{timeout:100}},children:e.jsx(X,{in:j,children:e.jsx(d,{sx:ee,children:r&&e.jsxs("div",{style:{backgroundColor:"white",margin:"auto",display:"flex",flexDirection:"column",height:"100%"},children:[e.jsxs(g,{variant:"h5",gutterBottom:!0,align:"left",children:["Print ",r.id]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsxs(g,{variant:"body1",style:{textAlign:"left",maxWidth:"350px"},children:["Billing Address: ",r.address,e.jsx("br",{}),"Shipping Address: ",r.address_two]}),e.jsxs(g,{variant:"body1",style:{textAlign:"right"},children:["Financial Status: ",r.financialStatus,e.jsx("br",{}),"Fulfillment Status: ",r.fulfillmentStatus]})]}),e.jsx(Ie,{children:e.jsxs(Oe,{children:[e.jsx(Ee,{children:e.jsxs(Y,{children:[e.jsx(u,{align:"left",style:{fontWeight:"bold"},children:"Item"}),e.jsx(u,{align:"center",style:{fontWeight:"bold"},children:"Quantity"}),e.jsx(u,{align:"right",style:{fontWeight:"bold"},children:"Price"})]})}),e.jsx(Le,{children:r.items.map((t,s)=>e.jsxs(Y,{children:[e.jsx(u,{align:"left",children:t.item}),e.jsx(u,{align:"center",children:t.quantity}),e.jsxs(u,{align:"right",children:["$",t.price*t.quantity]})]},s))})]})}),e.jsx("div",{style:{flex:"1"}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"15px"},children:e.jsxs(g,{variant:"h6",children:["Total: $",r.total]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:e.jsx(k,{variant:"contained",color:"primary",onClick:L,children:"Close"})})]})})})})}),e.jsx("div",{children:e.jsx(G,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:D,onClose:V,closeAfterTransition:!0,slots:{backdrop:K},slotProps:{backdrop:{timeout:100}},children:e.jsx(X,{in:D,children:e.jsx(d,{sx:te,children:e.jsxs("div",{style:{backgroundColor:"white",margin:"auto",display:"flex",flexDirection:"column",height:"100%"},children:[m=="CARD"?e.jsx("img",{src:f,style:{objectFit:"cover",height:"340px"}}):e.jsx("p",{children:m}),e.jsx("div",{style:{flex:"1"}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:e.jsx(k,{variant:"contained",color:"primary",onClick:V,children:"Close"})})]})})})})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm",children:e.jsxs(d,{p:2,children:[e.jsx(d,{children:e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",m:1,mb:2},children:[e.jsx(g,{variant:"h5",component:"div",sx:{fontSize:{xs:"20px",sm:"20px",md:"20px",lg:"22px",xl:"22px"}},children:"Prints"}),e.jsx(Fe,{labelInline:!0,label:"Rows:",options:ae,value:_,onChange:ne})]})}),e.jsxs(d,{children:[e.jsx(qe,{sortOptions:ce,sortSelected:C,queryValue:A,queryPlaceholder:"Searching in all",onQueryChange:be,onQueryClear:F,onSort:de,cancelAction:{onAction:pe,disabled:!1,loading:!1},tabs:oe,selected:y,onSelect:ie,canCreateNewView:!1,filters:Se,appliedFilters:ke,onClearAll:ye,mode:he,setMode:ue,loading:ge}),e.jsx(a,{resourceName:se,itemCount:c.length,selectedItemsCount:fe?"All":z.length,onSelectionChange:je,headings:[{title:"Order #"},{title:"Date"},{title:"Design"},{title:"City Visible"},{title:"Date Visible"},{title:"Stars Effect"},{title:"Title"},{title:"Title Font"},{title:"Paragraph"},{title:"Paragraph Font"},{title:"Status"},{title:"Actions"}],hasMoreItems:!0,selectable:!1,children:we})]}),e.jsx("hr",{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"22px",paddingBottom:"5px"},children:e.jsx(Be,{hasNext:!!i.next_cursor,hasPrevious:!!i.prev_cursor,onNext:()=>{N({...i,path:i.next_page_url}),h(i.next_cursor),o(!n)},onPrevious:()=>{N({...i,path:i.prev_page_url}),h(i.prev_cursor),o(!n)}})})]})})})})]})}export{et as default};
