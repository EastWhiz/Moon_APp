import{r as l,R as E,C as _e,j as e,a as Ae}from"./app-5a73667c.js";import{A as Ne}from"./ClientLayout-f459000b.js";import{S as D}from"./sweetalert2.all-08451b17.js";import{d as Re,U as Fe,u as qe,a as Ie,I as a,B as v,b as _,S as Be,c as Oe,P as Ee}from"./Select-b0ab6a72.js";import{B as u,T as j}from"./Box-72fbf6f7.js";import{M as Z,B as ee,F as te}from"./Modal-9e11a819.js";import{T as De,a as Le,b as Ve,c as se,d as m,e as Ue}from"./TableRow-a896c0c2.js";import"./ResponsiveNavLink-a0ffdd01.js";import"./transition-35b84920.js";import"./TransitionGroup-33a8210d.js";import"./CSSTransition-8d49d2db.js";import"./useSlot-f8adfdd4.js";import"./useTheme-01923715.js";const Me=l.createContext(!1);var L={Link:"Polaris-Link",monochrome:"Polaris-Link--monochrome",removeUnderline:"Polaris-Link--removeUnderline"};function Qe({url:A,children:g,onClick:b,external:N,target:y,id:C,monochrome:V,removeUnderline:i,accessibilityLabel:R,dataPrimaryLink:f}){return E.createElement(Me.Consumer,null,U=>{const S=V||U,k=Re(L.Link,S&&L.monochrome,i&&L.removeUnderline);return A?E.createElement(Fe,{onClick:b,className:k,url:A,external:N,target:y,id:C,"aria-label":R,"data-primary-link":f},g):E.createElement("button",{type:"button",onClick:b,className:k,id:C,"aria-label":R,"data-primary-link":f},g)})}function lt({auth:A}){const g=_e().props,{query:b}=g.ziggy;console.log(g);function N(t){return Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}const y=N(b),[C,V]=l.useState(""),[i,R]=l.useState(!1),[f,U]=l.useState(!1),[S,k]=l.useState(!1),M=()=>k(!1),[Q,le]=l.useState(!1),$=()=>le(!1),ae={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"70%",md:"60%",lg:"50%",xl:"50%"},bgcolor:"background.paper",boxShadow:24,p:3,pt:2,height:"420px",overflow:"auto"},re={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"70%",md:"35%",lg:"32%",xl:"32%"},bgcolor:"background.paper",boxShadow:24,p:3,pt:3,overflow:"auto"};let W=null;const ne={singular:"print",plural:"prints"},[n,w]=l.useState([]),ie=[{label:"5",value:"5"},{label:"10",value:"10"},{label:"20",value:"20"},{label:"50",value:"50"},{label:"100",value:"100"}],[F,oe]=l.useState("10"),ce=l.useCallback(t=>{oe(t),d(!o)},[n]),[P,de]=l.useState(0),he=["All"].map((t,s)=>({content:t,index:s,onAction:()=>{},id:`${t}-${s}`,isLocked:s===0,actions:[]})),pe=[{label:"Id",value:"id asc",directionLabel:"Ascending"},{label:"Id",value:"id desc",directionLabel:"Descending"}],[T,ue]=l.useState(["id desc"]),{mode:xe,setMode:me}=qe(),ge=()=>{},[q,z]=l.useState(""),[H,fe]=l.useState([]),[J,je]=l.useState(""),[c,I]=l.useState({path:route("prints.get.client"),next_cursor:null,next_page_url:null,prev_cursor:null,prev_page_url:null}),[G,x]=l.useState(null),[be,B]=l.useState(!1),[o,d]=l.useState(!1),{selectedResources:K,allResourcesSelected:ye,handleSelectionChange:Ce}=Ie(n);l.useEffect(()=>{let t=new URL(c.path);F&&t.searchParams.set("page_count",F),G&&t.searchParams.set("cursor",G),P==0?t.searchParams.delete("status"):P==1?t.searchParams.set("status","approved"):P==2&&t.searchParams.set("status","unapproved"),q!=""?t.searchParams.set("q",q):t.searchParams.delete("q"),T!=""?t.searchParams.set("q5",T[0]):t.searchParams.delete("q5"),H.length!=0?t.searchParams.set("q2",JSON.stringify(H)):t.searchParams.delete("q2"),J.length!=0?t.searchParams.set("q3",JSON.stringify(J)):t.searchParams.delete("q3"),t=t.toString()+"&"+y,B(!0),fetch(t).then(s=>s.json()).then(s=>{if(s.success==!0){const h=s.data.data.map(r=>({...r,loading:!1}));w(h),I({path:s.data.path,next_cursor:s.data.next_cursor,next_page_url:s.data.next_page_url,prev_cursor:s.data.prev_cursor,prev_page_url:s.data.prev_page_url})}B(!1)}).catch(s=>{B(!1)})},[o]),l.useEffect(()=>{d(!o)},[T]);const Se=l.useCallback(t=>{z(t),clearTimeout(W),W=setTimeout(()=>{x(null),d(!o)},500)},[n]),O=l.useCallback(()=>{z(""),x(null),d(!o)},[n]),X=l.useCallback(()=>{fe([]),x(null),d(!o)},[n]),Y=l.useCallback(()=>{je([]),x(null),d(!o)},[n]),ke=l.useCallback(()=>{O(),X(),Y()},[O,X,Y]),we=t=>{let s=[...n],h=s.findIndex(r=>r.id==t.id);s[h]={...s[h],loading:!0},w(s),fetch(route("retry.print")+"&"+y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_print_id:t.id})}).then(r=>{if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return r.json()}).then(r=>{if(r.success)D.fire("Success",r.message,"success"),d(!o);else{D.fire("Error",r.message,"error");let p=[...n];p[h]={...p[h],loading:!1},w(p)}}).catch(r=>{D.fire("Error",r.toString(),"error");let p=[...n];p[h]={...p[h],loading:!1},w(p)})},Pe=[],Te=[],ve=n.map((t,s)=>e.jsxs(a.Row,{id:t.id,selected:K.includes(t.id),position:s,children:[e.jsx(a.Cell,{children:e.jsx("div",{className:"custom_style",children:e.jsx(Qe,{dataPrimaryLink:!0,children:e.jsx("b",{children:t.order.order_name})})})}),e.jsx(a.Cell,{children:t.selectedDate}),e.jsx(a.Cell,{children:t.design}),e.jsx(a.Cell,{children:e.jsx(v,{status:t.cityVisible=="true"?"success":"critical",children:t.cityVisible})}),e.jsx(a.Cell,{children:e.jsx(v,{status:t.dateVisible=="true"?"success":"critical",children:t.dateVisible})}),e.jsx(a.Cell,{children:e.jsx(v,{status:t.starsEffect=="true"?"success":"critical",children:t.starsEffect})}),e.jsx(a.Cell,{children:t.title??"N/A"}),e.jsx(a.Cell,{children:t.titleFont??"N/A"}),e.jsx(a.Cell,{children:t.paragraphText??"N/A"}),e.jsx(a.Cell,{children:t.paragraphTextFont??"N/A"}),e.jsx(a.Cell,{children:e.jsx(v,{status:t.status=="processed"?"success":"critical",children:t.status})}),e.jsxs(a.Cell,{children:[e.jsx(_,{disabled:!t.link,size:"slim",onClick:()=>window.open(t.link,"_blank"),children:"Open"}),e.jsx(u,{component:"span",ml:1}),e.jsx(_,{loading:!!t.loading,size:"slim",onClick:()=>we(t),children:"Re-Work"})]})]},t.id));return e.jsxs(Ne,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:" Dashboard "}),children:[e.jsx(Ae,{title:"Prints"}),e.jsx("div",{children:e.jsx(Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:S,onClose:M,closeAfterTransition:!0,slots:{backdrop:ee},slotProps:{backdrop:{timeout:100}},children:e.jsx(te,{in:S,children:e.jsx(u,{sx:ae,children:i&&e.jsxs("div",{style:{backgroundColor:"white",margin:"auto",display:"flex",flexDirection:"column",height:"100%"},children:[e.jsxs(j,{variant:"h5",gutterBottom:!0,align:"left",children:["Print ",i.id]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsxs(j,{variant:"body1",style:{textAlign:"left",maxWidth:"350px"},children:["Billing Address: ",i.address,e.jsx("br",{}),"Shipping Address: ",i.address_two]}),e.jsxs(j,{variant:"body1",style:{textAlign:"right"},children:["Financial Status: ",i.financialStatus,e.jsx("br",{}),"Fulfillment Status: ",i.fulfillmentStatus]})]}),e.jsx(De,{children:e.jsxs(Le,{children:[e.jsx(Ve,{children:e.jsxs(se,{children:[e.jsx(m,{align:"left",style:{fontWeight:"bold"},children:"Item"}),e.jsx(m,{align:"center",style:{fontWeight:"bold"},children:"Quantity"}),e.jsx(m,{align:"right",style:{fontWeight:"bold"},children:"Price"})]})}),e.jsx(Ue,{children:i.items.map((t,s)=>e.jsxs(se,{children:[e.jsx(m,{align:"left",children:t.item}),e.jsx(m,{align:"center",children:t.quantity}),e.jsxs(m,{align:"right",children:["$",t.price*t.quantity]})]},s))})]})}),e.jsx("div",{style:{flex:"1"}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"15px"},children:e.jsxs(j,{variant:"h6",children:["Total: $",i.total]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:e.jsx(_,{variant:"contained",color:"primary",onClick:M,children:"Close"})})]})})})})}),e.jsx("div",{children:e.jsx(Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Q,onClose:$,closeAfterTransition:!0,slots:{backdrop:ee},slotProps:{backdrop:{timeout:100}},children:e.jsx(te,{in:Q,children:e.jsx(u,{sx:re,children:e.jsxs("div",{style:{backgroundColor:"white",margin:"auto",display:"flex",flexDirection:"column",height:"100%"},children:[f=="CARD"?e.jsx("img",{src:C,style:{objectFit:"cover",height:"340px"}}):e.jsx("p",{children:f}),e.jsx("div",{style:{flex:"1"}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:e.jsx(_,{variant:"contained",color:"primary",onClick:$,children:"Close"})})]})})})})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm",children:e.jsxs(u,{p:2,children:[e.jsx(u,{children:e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",m:1,mb:2},children:[e.jsx(j,{variant:"h5",component:"div",sx:{fontSize:{xs:"20px",sm:"20px",md:"20px",lg:"22px",xl:"22px"}},children:"Prints"}),e.jsx(Be,{labelInline:!0,label:"Rows:",options:ie,value:F,onChange:ce})]})}),e.jsxs(u,{children:[e.jsx(Oe,{sortOptions:pe,sortSelected:T,queryValue:q,queryPlaceholder:"Searching in all",onQueryChange:Se,onQueryClear:O,onSort:ue,cancelAction:{onAction:ge,disabled:!1,loading:!1},tabs:he,selected:P,onSelect:de,canCreateNewView:!1,filters:Pe,appliedFilters:Te,onClearAll:ke,mode:xe,setMode:me,loading:be}),e.jsx(a,{resourceName:ne,itemCount:n.length,selectedItemsCount:ye?"All":K.length,onSelectionChange:Ce,headings:[{title:"Order #"},{title:"Date"},{title:"Design"},{title:"City Visible"},{title:"Date Visible"},{title:"Stars Effect"},{title:"Title"},{title:"Title Font"},{title:"Paragraph"},{title:"Paragraph Font"},{title:"Status"},{title:"Actions"}],hasMoreItems:!0,selectable:!1,children:ve})]}),e.jsx("hr",{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"22px",paddingBottom:"5px"},children:e.jsx(Ee,{hasNext:!!c.next_cursor,hasPrevious:!!c.prev_cursor,onNext:()=>{I({...c,path:c.next_page_url}),x(c.next_cursor),d(!o)},onPrevious:()=>{I({...c,path:c.prev_page_url}),x(c.prev_cursor),d(!o)}})})]})})})})]})}export{lt as default};
